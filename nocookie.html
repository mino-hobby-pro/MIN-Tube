<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D UFO Animation</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
<script>
    // シーン、カメラ、レンダラーの作成
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // UFOの作成
    const ufoGeometry = new THREE.Group();

    // UFOの本体
    const bodyGeometry = new THREE.CylinderGeometry(1, 1.5, 0.5, 32);
    const bodyMaterial = new THREE.MeshPhongMaterial({color: 0x888888});
    const bodyMesh = new THREE.Mesh(bodyGeometry, bodyMaterial);
    ufoGeometry.add(bodyMesh);

    // UFOの窓
    const windowGeometry = new THREE.SphereGeometry(0.3, 32, 32);
    const windowMaterial = new THREE.MeshBasicMaterial({color: 0x0000ff, transparent: true, opacity: 0.5});
    const windowMesh = new THREE.Mesh(windowGeometry, windowMaterial);
    windowMesh.position.y = 0.3;
    ufoGeometry.add(windowMesh);

    // UFOのアンテナ
    const antennaGeometry = new THREE.CylinderGeometry(0.05, 0.05, 0.5, 32);
    const antennaMaterial = new THREE.MeshPhongMaterial({color: 0xff0000});
    const antennaMesh = new THREE.Mesh(antennaGeometry, antennaMaterial);
    antennaMesh.position.y = 0.5;
    antennaMesh.rotation.z = Math.PI / 4;
    ufoGeometry.add(antennaMesh);

    // UFOの半重力エンジン
    const engineGeometry = new THREE.CylinderGeometry(0.15, 0.15, 0.2, 32);
    const engineMaterial = new THREE.MeshPhongMaterial({color: 0x00ff00});
    const engineMesh = new THREE.Mesh(engineGeometry, engineMaterial);
    engineMesh.position.y = -0.5;
    ufoGeometry.add(engineMesh);

    // UFOにテキストを追加
    const textLoader = new THREE.FontLoader();
    textLoader.load('https://threejs.org/examples/fonts/helvetiker_regular.typeface.json', function (font) {
        const textGeometry = new THREE.TextGeometry('mino_hobby', {
            font: font,
            size: 0.1,
            height: 0.02,
            curveSegments: 12,
            bevelEnabled: false
        });
        const textMaterial = new THREE.MeshBasicMaterial({color: 0xffffff});
        const textMesh = new THREE.Mesh(textGeometry, textMaterial);
        textMesh.position.set(-0.5, 0, 0);
        ufoGeometry.add(textMesh);
    });

    scene.add(ufoGeometry);
    camera.position.z = 5;

    // 照明の追加
    const ambientLight = new THREE.AmbientLight(0x404040);
    scene.add(ambientLight);
    const pointLight = new THREE.PointLight(0xffffff, 1);
    pointLight.position.set(5, 5, 5);
    scene.add(pointLight);

    // アニメーションの作成
    function animate() {
        requestAnimationFrame(animate);
        ufoGeometry.rotation.y += 0.01; // UFOを回転させる
        renderer.render(scene, camera);
    }

    // ユーザー操作のためのイベントリスナー
    window.addEventListener('mousemove', (event) => {
        const mouseX = (event.clientX / window.innerWidth) * 2 - 1;
        const mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
        camera.position.x = mouseX * 2;
        camera.position.y = mouseY * 2;
    });

    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

    animate();
</script>
</body>
</html>
